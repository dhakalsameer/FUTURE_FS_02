<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>CRM Dashboard</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-slate-100 min-h-screen p-8">

<h1 class="text-3xl font-bold mb-6">ðŸ“Š Leads Dashboard</h1>

<div class="overflow-x-auto bg-white shadow rounded-lg">
  <table class="w-full border-collapse">
    <thead class="bg-slate-200 text-left">
      <tr>
        <th class="p-3">Name</th>
        <th class="p-3">Email</th>
        <th class="p-3">Source</th>
        <th class="p-3">Status</th>
        <th class="p-3">Created</th>
      </tr>
    </thead>

    <tbody>
      {% for lead in leads %}
      <tr class="border-b hover:bg-slate-50">
        <td class="p-3">{{ lead.name }}</td>
        <td class="p-3">{{ lead.email }}</td>
        <td class="p-3">{{ lead.source }}</td>

        <td class="p-3">
          <form method="post" action="{% url 'update_lead_status' lead.id %}">
            {% csrf_token %}
            <select name="status"
              class="border rounded px-2 py-1"
              onchange="this.form.submit()">
              <option value="new" {% if lead.status == 'new' %}selected{% endif %}>New</option>
              <option value="contacted" {% if lead.status == 'contacted' %}selected{% endif %}>Contacted</option>
              <option value="converted" {% if lead.status == 'converted' %}selected{% endif %}>Converted</option>
            </select>
          </form>
        </td>

        <td class="p-3 text-sm text-gray-600">
          {{ lead.created_at|date:"Y-m-d H:i" }}
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</div>

</body>
</html>

<h2>Leads Dashboard</h2>

<table border="1" cellpadding="8">
  <tr>
    <th>Name</th>
    <th>Email</th>
    <th>Source</th>
    <th>Status</th>
    <th>Created</th>
  </tr>

  {% for lead in leads %}
  <tr>
    <td>{{ lead.name }}</td>
    <td>{{ lead.email }}</td>
    <td>{{ lead.source }}</td>

    <!-- STATUS UPDATE CELL -->
    <td>
      <form method="post" action="{% url 'update_lead_status' lead.id %}">
        {% csrf_token %}
        <select name="status" onchange="this.form.submit()">
          <option value="new" {% if lead.status == 'new' %}selected{% endif %}>New</option>
          <option value="contacted" {% if lead.status == 'contacted' %}selected{% endif %}>Contacted</option>
          <option value="converted" {% if lead.status == 'converted' %}selected{% endif %}>Converted</option>
        </select>
      </form>
    </td>

    <td>{{ lead.created_at }}</td>
  </tr>
  {% endfor %}
</table>
